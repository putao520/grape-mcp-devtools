# è¯­è¨€ç‰¹æ€§æ¨¡å—å¼€å‘è®¡åˆ’

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

è¯­è¨€ç‰¹æ€§æ¨¡å—è´Ÿè´£å¤šè¯­è¨€ç”Ÿæ€ç³»ç»Ÿæ”¯æŒï¼ŒåŒ…æ‹¬è¯­è¨€æ£€æµ‹ã€åŒ…ç®¡ç†å™¨é›†æˆã€ç‰ˆæœ¬æ£€æŸ¥å’Œä¾èµ–åˆ†æç­‰åŠŸèƒ½ã€‚æ”¯æŒ Rustã€Pythonã€JavaScriptã€Javaã€Goã€Dart ç­‰ä¸»æµç¼–ç¨‹è¯­è¨€ã€‚

### æ¨¡å—å®šä½
- **èŒè´£**: å¤šè¯­è¨€ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ
- **åŠŸèƒ½**: è¯­è¨€æ£€æµ‹ã€åŒ…ç®¡ç†å™¨é›†æˆã€ç”Ÿæ€ç‰¹æ€§åˆ†æ
- **é‡è¦æ€§**: æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
- **ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ç­‰ä¼˜å…ˆçº§

## ğŸ¯ å¼€å‘ç›®æ ‡

### ä¸»è¦ç›®æ ‡
1. **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒ 6 ç§ä¸»æµç¼–ç¨‹è¯­è¨€ç”Ÿæ€
2. **ç‰ˆæœ¬ç®¡ç†**: æ™ºèƒ½çš„åŒ…ç‰ˆæœ¬æ£€æŸ¥å’Œæ›´æ–°å»ºè®®
3. **ä¾èµ–åˆ†æ**: æ·±åº¦ä¾èµ–å…³ç³»åˆ†æå’Œå…¼å®¹æ€§æ£€æŸ¥
4. **ç”Ÿæ€é›†æˆ**: ä¸å„è¯­è¨€å®˜æ–¹å·¥å…·é“¾é›†æˆ

### æ”¯æŒçš„è¯­è¨€ç”Ÿæ€
- **Rust**: cargoã€crates.io
- **Python**: pipã€PyPIã€conda
- **JavaScript/Node.js**: npmã€yarnã€pnpm
- **Java**: Mavenã€Gradle
- **Go**: go modã€go.dev
- **Dart/Flutter**: pubã€dart.dev

### å…·ä½“åŠŸèƒ½è¦æ±‚
- [ ] é¡¹ç›®è¯­è¨€è‡ªåŠ¨æ£€æµ‹
- [ ] åŒ…ç®¡ç†å™¨é›†æˆ
- [ ] ä¾èµ–ç‰ˆæœ¬æ£€æŸ¥
- [ ] å®‰å…¨æ¼æ´æ‰«æ
- [ ] å…¼å®¹æ€§åˆ†æ
- [ ] æ›´æ–°å»ºè®®ç”Ÿæˆ

## ğŸ“… å¼€å‘æ—¶é—´è¡¨

### Week 4-5: æ ¸å¿ƒå¼€å‘æœŸ
**æ—¶é—´**: ç¬¬4-5å‘¨ (10ä¸ªå·¥ä½œæ—¥)

#### Week 4: åŸºç¡€è¯­è¨€æ”¯æŒ
- **Day 1-2**: Rust ç”Ÿæ€é›†æˆ
  - [ ] cargo å·¥å…·é›†æˆ
  - [ ] crates.io API è°ƒç”¨
  - [ ] Cargo.toml è§£æ
  - [ ] ä¾èµ–æ ‘åˆ†æ

- **Day 3-4**: Python ç”Ÿæ€é›†æˆ
  - [ ] pip å·¥å…·é›†æˆ
  - [ ] PyPI API è°ƒç”¨
  - [ ] requirements.txt è§£æ
  - [ ] virtual environment æ£€æµ‹

- **Day 5**: JavaScript ç”Ÿæ€é›†æˆ
  - [ ] npm/yarn å·¥å…·é›†æˆ
  - [ ] package.json è§£æ
  - [ ] npm registry API

#### Week 5: æ‰©å±•è¯­è¨€å’Œé«˜çº§åŠŸèƒ½
- **Day 1**: Java ç”Ÿæ€é›†æˆ
  - [ ] Maven pom.xml è§£æ
  - [ ] Gradle build.gradle è§£æ
  - [ ] Maven Central API

- **Day 2**: Go å’Œ Dart ç”Ÿæ€é›†æˆ
  - [ ] go.mod è§£æ
  - [ ] pubspec.yaml è§£æ
  - [ ] å®˜æ–¹ API é›†æˆ

- **Day 3-4**: é«˜çº§åŠŸèƒ½å®ç°
  - [ ] è·¨è¯­è¨€ä¾èµ–åˆ†æ
  - [ ] å®‰å…¨æ¼æ´æ‰«æ
  - [ ] ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥

- **Day 5**: æµ‹è¯•å’Œä¼˜åŒ–
  - [ ] é›†æˆæµ‹è¯•
  - [ ] æ€§èƒ½ä¼˜åŒ–
  - [ ] Windows å…¼å®¹æ€§éªŒè¯

## ğŸ”§ æŠ€æœ¯å®ç°è§„èŒƒ

### æ ¸å¿ƒæ•°æ®ç»“æ„

```rust
// è¯­è¨€æ£€æµ‹å™¨
pub struct LanguageDetector {
    detectors: HashMap<Language, Box<dyn LanguageDetector>>,
}

// è¯­è¨€æšä¸¾
#[derive(Debug, Clone, PartialEq, Eq, Hash)]
pub enum Language {
    Rust,
    Python,
    JavaScript,
    TypeScript,
    Java,
    Go,
    Dart,
}

// é¡¹ç›®ä¿¡æ¯
#[derive(Debug, Clone)]
pub struct ProjectInfo {
    pub language: Language,
    pub package_manager: PackageManager,
    pub dependencies: Vec<Dependency>,
    pub dev_dependencies: Vec<Dependency>,
    pub metadata: ProjectMetadata,
}

// ä¾èµ–ä¿¡æ¯
#[derive(Debug, Clone)]
pub struct Dependency {
    pub name: String,
    pub version: String,
    pub source: String,
    pub is_dev: bool,
    pub vulnerabilities: Vec<Vulnerability>,
}

// ç‰ˆæœ¬æ£€æŸ¥ç»“æœ
#[derive(Debug, Clone)]
pub struct VersionCheckResult {
    pub current_version: String,
    pub latest_version: String,
    pub available_updates: Vec<String>,
    pub security_advisories: Vec<SecurityAdvisory>,
    pub compatibility_issues: Vec<CompatibilityIssue>,
}
```

### è¯­è¨€ç‰¹å®šå·¥å…·å®ç°

```rust
// Rust å·¥å…·å®ç°
pub struct RustTool {
    http_client: reqwest::Client,
    cargo_path: PathBuf,
}

impl LanguageTool for RustTool {
    async fn detect_project(&self, path: &Path) -> Result<Option<ProjectInfo>> {
        if path.join("Cargo.toml").exists() {
            let cargo_toml = self.parse_cargo_toml(path)?;
            Ok(Some(self.extract_project_info(cargo_toml)?))
        } else {
            Ok(None)
        }
    }
    
    async fn check_versions(&self, dependencies: &[Dependency]) -> Result<Vec<VersionCheckResult>> {
        let mut results = Vec::new();
        
        for dep in dependencies {
            let result = self.check_crate_version(dep).await?;
            results.push(result);
        }
        
        Ok(results)
    }
}
```

### ç¬¬ä¸‰æ–¹ä¾èµ–

```toml
[dependencies]
# åŸºç¡€ä¾èµ–
tokio = { version = "1.0", features = ["full"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
reqwest = { version = "0.11", features = ["json"] }
anyhow = "1.0"

# è¯­è¨€ç‰¹å®šè§£æ
toml = "0.8"              # Cargo.toml, pyproject.toml
serde_yaml = "0.9"        # pubspec.yaml
xml-rs = "0.8"            # pom.xml
regex = "1.5"             # ç‰ˆæœ¬è§£æ

# å®‰å…¨æ‰«æ
rustsec = "0.27"          # Rust å®‰å…¨æ•°æ®åº“
semver = "1.0"            # è¯­ä¹‰åŒ–ç‰ˆæœ¬
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/language_features/
â”œâ”€â”€ mod.rs                  # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ detector.rs             # è¯­è¨€æ£€æµ‹å™¨
â”œâ”€â”€ languages/              # å„è¯­è¨€æ”¯æŒ
â”‚   â”œâ”€â”€ rust.rs            # Rust ç”Ÿæ€æ”¯æŒ
â”‚   â”œâ”€â”€ python.rs          # Python ç”Ÿæ€æ”¯æŒ
â”‚   â”œâ”€â”€ javascript.rs      # JavaScript ç”Ÿæ€æ”¯æŒ
â”‚   â”œâ”€â”€ java.rs            # Java ç”Ÿæ€æ”¯æŒ
â”‚   â”œâ”€â”€ golang.rs          # Go ç”Ÿæ€æ”¯æŒ
â”‚   â””â”€â”€ dart.rs            # Dart ç”Ÿæ€æ”¯æŒ
â”œâ”€â”€ version_checker.rs      # ç‰ˆæœ¬æ£€æŸ¥å™¨
â”œâ”€â”€ security_scanner.rs     # å®‰å…¨æ‰«æå™¨
â”œâ”€â”€ dependency_analyzer.rs  # ä¾èµ–åˆ†æå™¨
â””â”€â”€ tools.rs               # MCP å·¥å…·æ¥å£

tests/language_features/
â”œâ”€â”€ detector_test.rs        # æ£€æµ‹å™¨æµ‹è¯•
â”œâ”€â”€ version_test.rs         # ç‰ˆæœ¬æ£€æŸ¥æµ‹è¯•
â”œâ”€â”€ security_test.rs        # å®‰å…¨æ‰«ææµ‹è¯•
â””â”€â”€ integration/            # å„è¯­è¨€é›†æˆæµ‹è¯•
    â”œâ”€â”€ rust_test.rs
    â”œâ”€â”€ python_test.rs
    â””â”€â”€ ...
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•æ•°æ®å‡†å¤‡
- å‡†å¤‡å„è¯­è¨€çš„ç¤ºä¾‹é¡¹ç›®
- åˆ›å»ºæµ‹è¯•ç”¨çš„ä¾èµ–é…ç½®æ–‡ä»¶
- æ¨¡æ‹Ÿä¸åŒç‰ˆæœ¬çš„ä¾èµ–åœºæ™¯
- å‡†å¤‡å®‰å…¨æ¼æ´æµ‹è¯•æ•°æ®

### æµ‹è¯•ç±»å‹

#### 1. å•å…ƒæµ‹è¯•
- [ ] å„è¯­è¨€é…ç½®æ–‡ä»¶è§£æ
- [ ] ç‰ˆæœ¬å·æ¯”è¾ƒå’Œè§£æ
- [ ] ä¾èµ–å…³ç³»åˆ†æ
- [ ] å®‰å…¨æ‰«æé€»è¾‘

#### 2. é›†æˆæµ‹è¯•
- [ ] çœŸå®é¡¹ç›®æ£€æµ‹
- [ ] API è°ƒç”¨æµ‹è¯•
- [ ] è·¨è¯­è¨€é¡¹ç›®æ”¯æŒ
- [ ] å·¥å…·é“¾é›†æˆæµ‹è¯•

#### 3. æ€§èƒ½æµ‹è¯•
- [ ] å¤§å‹é¡¹ç›®åˆ†ææ€§èƒ½
- [ ] æ‰¹é‡ç‰ˆæœ¬æ£€æŸ¥æ€§èƒ½
- [ ] å†…å­˜ä½¿ç”¨æ•ˆç‡
- [ ] å¹¶å‘æ‰«æèƒ½åŠ›

### çœŸå®ç¯å¢ƒæµ‹è¯•
- ä½¿ç”¨çœŸå®çš„å¼€æºé¡¹ç›®è¿›è¡Œæµ‹è¯•
- éªŒè¯å„åŒ…ç®¡ç†å™¨çš„å®é™…è¡Œä¸º
- æµ‹è¯•ä¸åŒæ“ä½œç³»ç»Ÿçš„å…¼å®¹æ€§
- éªŒè¯ç½‘ç»œ API çš„ç¨³å®šæ€§

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æ€§èƒ½
- **è¯­è¨€æ£€æµ‹**: < 100ms
- **ä¾èµ–è§£æ**: < 500ms (ä¸­ç­‰é¡¹ç›®)
- **ç‰ˆæœ¬æ£€æŸ¥**: < 2s (10ä¸ªä¾èµ–)
- **å®‰å…¨æ‰«æ**: < 3s (å®Œæ•´æ‰«æ)

### èµ„æºä½¿ç”¨
- **å†…å­˜ä½¿ç”¨**: < 30MB
- **ç½‘ç»œè¯·æ±‚**: åˆç†ç¼“å­˜ï¼Œé¿å…é‡å¤è¯·æ±‚
- **CPU ä½¿ç”¨**: è½»é‡çº§è§£æï¼Œé¿å…å¤æ‚è®¡ç®—
- **ç£ç›˜è®¿é—®**: æœ€å°åŒ–æ–‡ä»¶è¯»å–

## ğŸš¨ é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
1. **API å˜æ›´é£é™©**
   - é£é™©ç­‰çº§: ä¸­
   - ç¼“è§£: ä½¿ç”¨ç¨³å®š APIï¼Œå»ºç«‹é€‚é…å±‚

2. **å¤šè¯­è¨€å¤æ‚æ€§**
   - é£é™©ç­‰çº§: ä¸­
   - ç¼“è§£: æ¨¡å—åŒ–è®¾è®¡ï¼Œé€æ­¥å®ç°

3. **ç‰ˆæœ¬è§£æé”™è¯¯**
   - é£é™©ç­‰çº§: ä¸­
   - ç¼“è§£: ä½¿ç”¨æˆç†Ÿçš„è§£æåº“ï¼Œå……åˆ†æµ‹è¯•

### å¤–éƒ¨ä¾èµ–é£é™©
1. **ç½‘ç»œ API å¯ç”¨æ€§**
   - é£é™©ç­‰çº§: ä¸­
   - ç¼“è§£: é”™è¯¯å¤„ç†ï¼Œé™çº§æœºåˆ¶

2. **å·¥å…·é“¾ç‰ˆæœ¬å…¼å®¹**
   - é£é™©ç­‰çº§: ä½
   - ç¼“è§£: æ”¯æŒå¤šç‰ˆæœ¬ï¼Œå‘åå…¼å®¹

## ğŸ”§ å®ç°ç»†èŠ‚

### æ ¸å¿ƒå®ç°è¦ç‚¹

#### 1. è¯­è¨€æ£€æµ‹å®ç°
```rust
impl LanguageDetector {
    pub async fn detect_language(&self, path: &Path) -> Result<Option<Language>> {
        // æŒ‰ä¼˜å…ˆçº§æ£€æµ‹
        if path.join("Cargo.toml").exists() {
            return Ok(Some(Language::Rust));
        }
        
        if path.join("package.json").exists() {
            return Ok(Some(Language::JavaScript));
        }
        
        if path.join("requirements.txt").exists() || path.join("pyproject.toml").exists() {
            return Ok(Some(Language::Python));
        }
        
        // ... å…¶ä»–è¯­è¨€æ£€æµ‹
        
        Ok(None)
    }
}
```

#### 2. ç‰ˆæœ¬æ£€æŸ¥å·¥å…·
```rust
pub struct VersionCheckTool {
    language_tools: HashMap<Language, Box<dyn LanguageTool>>,
    cache: Arc<RwLock<VersionCache>>,
}

impl MCPTool for VersionCheckTool {
    async fn execute(&self, params: serde_json::Value) -> Result<ToolResult> {
        let language = params["language"].as_str()
            .ok_or_else(|| anyhow::anyhow!("ç¼ºå°‘ language å‚æ•°"))?;
        
        let lang = Language::from_str(language)?;
        let tool = self.language_tools.get(&lang)
            .ok_or_else(|| anyhow::anyhow!("ä¸æ”¯æŒçš„è¯­è¨€: {}", language))?;
        
        let project_path = params["path"].as_str().unwrap_or(".");
        let project_info = tool.detect_project(Path::new(project_path)).await?;
        
        if let Some(info) = project_info {
            let results = tool.check_versions(&info.dependencies).await?;
            Ok(ToolResult {
                success: true,
                data: serde_json::to_value(results)?,
                metadata: Some(serde_json::to_value(info.metadata)?),
                execution_time: Duration::from_millis(500),
            })
        } else {
            Err(anyhow::anyhow!("æœªæ£€æµ‹åˆ° {} é¡¹ç›®", language))
        }
    }
}
```

#### 3. å®‰å…¨æ‰«æé›†æˆ
```rust
impl SecurityScanner {
    pub async fn scan_dependencies(&self, deps: &[Dependency]) -> Result<Vec<Vulnerability>> {
        let mut vulnerabilities = Vec::new();
        
        for dep in deps {
            // æŸ¥è¯¢å®‰å…¨æ•°æ®åº“
            let vulns = self.query_vulnerability_db(&dep.name, &dep.version).await?;
            vulnerabilities.extend(vulns);
        }
        
        Ok(vulnerabilities)
    }
    
    async fn query_vulnerability_db(&self, name: &str, version: &str) -> Result<Vec<Vulnerability>> {
        // æŸ¥è¯¢ OSVã€NVD ç­‰å®‰å…¨æ•°æ®åº“
        let response = self.http_client
            .get(&format!("https://api.osv.dev/v1/query"))
            .json(&serde_json::json!({
                "package": {
                    "name": name,
                    "ecosystem": self.get_ecosystem()
                },
                "version": version
            }))
            .send()
            .await?;
            
        let vulns: Vec<Vulnerability> = response.json().await?;
        Ok(vulns)
    }
}
```

## ğŸ“ˆ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] æ”¯æŒæ‰€æœ‰è®¡åˆ’çš„ 6 ç§è¯­è¨€
- [ ] è¯­è¨€æ£€æµ‹å‡†ç¡®ç‡ > 95%
- [ ] ç‰ˆæœ¬æ£€æŸ¥åŠŸèƒ½æ­£å¸¸
- [ ] å®‰å…¨æ‰«ææœ‰æ•ˆå·¥ä½œ

### æ€§èƒ½éªŒæ”¶
- [ ] æ‰€æœ‰æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- [ ] å¤§å‹é¡¹ç›®å¤„ç†æ­£å¸¸
- [ ] ç½‘ç»œé”™è¯¯ä¼˜é›…å¤„ç†
- [ ] å†…å­˜ä½¿ç”¨åˆç†

### å…¼å®¹æ€§éªŒæ”¶
- [ ] Windows ç¯å¢ƒå®Œå…¨å…¼å®¹
- [ ] å„å·¥å…·é“¾ç‰ˆæœ¬å…¼å®¹
- [ ] API è°ƒç”¨ç¨³å®šå¯é 
- [ ] é”™è¯¯å¤„ç†å®Œå–„

## ğŸš€ MCP å·¥å…·æ³¨å†Œ

### æ³¨å†Œçš„å·¥å…·
```rust
// åœ¨åŠ¨æ€æ³¨å†Œæ¨¡å—ä¸­æ³¨å†Œè¯­è¨€ç‰¹æ€§å·¥å…·
pub async fn register_language_tools(registry: &mut ToolRegistry) -> Result<()> {
    // è¯­è¨€æ£€æµ‹å·¥å…·
    registry.register_tool(Arc::new(LanguageDetectionTool::new())).await?;
    
    // ç‰ˆæœ¬æ£€æŸ¥å·¥å…·
    registry.register_tool(Arc::new(VersionCheckTool::new())).await?;
    
    // ä¾èµ–åˆ†æå·¥å…·
    registry.register_tool(Arc::new(DependencyAnalysisTool::new())).await?;
    
    // å®‰å…¨æ‰«æå·¥å…·
    registry.register_tool(Arc::new(SecurityScanTool::new())).await?;
    
    Ok(())
}
```

### å·¥å…·è§„èŒƒ
- æ¯ä¸ªå·¥å…·éƒ½å®ç° `MCPTool` trait
- æä¾›è¯¦ç»†çš„ JSON Schema
- æ”¯æŒå¼‚æ­¥æ‰§è¡Œ
- å®Œå–„çš„é”™è¯¯å¤„ç†

## ğŸ“‹ åç»­é›†æˆç‚¹

### ä¸å…¶ä»–æ¨¡å—åä½œ
1. **æ–‡æ¡£å¤„ç†æ¨¡å—**: æä¾›è¯­è¨€ç‰¹å®šçš„æ–‡æ¡£æœç´¢
2. **CLIé›†æˆæ¨¡å—**: è°ƒç”¨å„è¯­è¨€çš„å‘½ä»¤è¡Œå·¥å…·
3. **å­˜å‚¨å±‚æ¨¡å—**: ç¼“å­˜ç‰ˆæœ¬ä¿¡æ¯å’Œæ‰«æç»“æœ

### æ‰©å±•æ€§è€ƒè™‘
- æ”¯æŒæ›´å¤šç¼–ç¨‹è¯­è¨€
- é›†æˆæ›´å¤šåŒ…ç®¡ç†å™¨
- å¢åŠ æ›´å¤šå®‰å…¨æ•°æ®æº
- æ”¯æŒç§æœ‰åŒ…ä»“åº“

---

**å¼€å‘è®¡åˆ’ç‰ˆæœ¬**: v1.0  
**è´Ÿè´£å›¢é˜Ÿ**: åŠŸèƒ½å¼€å‘ç»„  
**é¢„è®¡å·¥æœŸ**: 2 å‘¨  
**ä¸Šæ¸¸ä¾èµ–**: åŠ¨æ€æ³¨å†Œæ¨¡å—  
**å¹¶è¡Œå¼€å‘**: æ–‡æ¡£å¤„ç†æ¨¡å— 